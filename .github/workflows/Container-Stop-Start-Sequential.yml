name: Container-Stop-Start-Sequential

on:
  workflow_dispatch:
jobs:

  ERT_STOP_START:

    runs-on: ubuntu-windows-runner

    steps:
    - uses: actions/checkout@v3
    - uses: madhead/read-java-properties@latest
      id: all
      with:
        file: ./app/src/main/resources/edgeruntime.properties
        all: true
    - run: echo ${{ steps.all.outputs.EDGE_RUNTIME_LIST }} # ERT names from a property file
  
    - name: Mendax Loop through numbers
    strategy:
      matrix:
        ERT_LIST: ${{ steps.all.outputs.EDGE_RUNTIME_LIST }
          echo "Mendax Current number:${{ matrix.ERT_LIST }}"
          docker stop ${{ matrix.ERT_LIST }}
          docker ps
          docker start ${{ matrix.ERT_LIST }}
          docker ps
          done
    
